// Chart made in graphwiz https://graphviz.org/

digraph G {
// splines="FALSE";
rankdir=LR;
pad=0.2;
edge [
  fontname="'Fira Code', monospace"
  color="#8a8e9b"
]
node [
  fontname="'Fira Code', monospace",
  shape="box",
  style="filled,rounded"
  width=2
]

// {
//   node [color="#c4e5fe"]
//   rank=same;
//   rawInstruments
//   rawCountries
//   rawUsers
//   rawAccounts
//   rawReminders
//   rawReminderMarkers
//   rawTransactions
//   rawMerchants
//   rawTags
//   rawCompanies
//   rawBudgets_zm
// }


subgraph cluster_INSTRUMENTS {
  style="filled,rounded"
  color="#e8e8e8";
  node [color="#c4e5fe"] // Start
  rawInstruments

  node [color="#ffcccc"] // Results
  rawInstruments -> fxIdMap
  rawInstruments -> instruments
}


subgraph cluster_COUNTRIES {
  style="filled,rounded"
  color="#e8e8e8";
  node [color="#c4e5fe"] // Start
  rawCountries

  node [color="#ab6cfe", fontcolor="white", shape="ellipse"] // Functions
  combineCountries

  node [color="#ffcccc", fontcolor="black", shape="box"] // Results
  fxIdMap -> combineCountries [color="#dd0044"]
  rawCountries -> combineCountries -> countries
}


subgraph cluster_COMPANIES {
  style="filled,rounded"
  color="#e8e8e8";
  node [color="#c4e5fe"] // Start
  rawCompanies

  node [color="#ffcccc"] // Results
  rawCompanies -> companies
}


subgraph cluster_USERS {
  style="filled,rounded"
  color="#e8e8e8";
  node [color="#c4e5fe"] // Start
  rawUsers

  node [color="#ab6cfe", fontcolor="white", shape="ellipse"] // Functions
  combineUsers

  node [color="#ffcccc", fontcolor="black", shape="box"] // Results
  fxIdMap -> combineUsers [color="#dd0044"]
  rawUsers -> combineUsers -> users

  users -> mainUser
  mainUser -> mainUserId
  mainUser -> mainUserCurrency
}


subgraph cluster_ACCOUNTS {
  style="filled,rounded"
  color="#e8e8e8";
  node [color="#c4e5fe"] // Start
  rawAccounts

  node [color="#ab6cfe", fontcolor="white", shape="ellipse"] // Functions
  combineAccounts

  node [color="#ffcccc", fontcolor="black", shape="box"] // Results
  fxIdMap -> combineAccounts [color="#dd0044"]
  rawAccounts -> combineAccounts -> accounts

  rawAccounts -> debtAccountId
}


subgraph cluster_MERCHANTS {
  style="filled,rounded"
  color="#e8e8e8";
  node [color="#c4e5fe"] // Start
  rawMerchants

  node [color="#ffcccc", fontcolor="black", shape="box"] // Results
  rawMerchants -> merchants
}


subgraph cluster_TAGS {
  style="filled,rounded"
  color="#e8e8e8";
  node [color="#c4e5fe"] // Start
  rawTags

  node [color="#ffcccc", fontcolor="black", shape="box"] // Results
  // Need hidden data for it
}


subgraph cluster_BUDGETS_ZM {
  style="filled,rounded"
  color="#e8e8e8";
  node [color="#c4e5fe"] // Start
  rawBudgets_zm

  node [color="#ab6cfe", fontcolor="white", shape="ellipse"] // Functions
  combineBudgets_zm

  node [color="#ffcccc", fontcolor="black", shape="box"] // Results
  fxIdMap -> combineBudgets_zm [color="#dd0044"]
  rawBudgets_zm -> combineBudgets_zm -> budgets_zm
}


subgraph cluster_REMINDERS {
  style="filled,rounded"
  color="#e8e8e8";
  node [color="#c4e5fe"] // Start
  rawReminders

  node [color="#ab6cfe", fontcolor="white", shape="ellipse"] // Functions
  combineReminders

  node [color="#ffcccc", fontcolor="black", shape="box"] // Results
  fxIdMap -> combineReminders [color="#dd0044"]
  rawReminders -> combineReminders -> reminders
}


subgraph cluster_REMINDER_MARKERS {
  style="filled,rounded"
  color="#e8e8e8";
  node [color="#c4e5fe"] // Start
  rawReminderMarkers

  node [color="#ab6cfe", fontcolor="white", shape="ellipse"] // Functions
  combineReminderMarkers

  node [color="#ffcccc", fontcolor="black", shape="box"] // Results
  fxIdMap -> combineReminderMarkers [color="#dd0044"]
  rawReminderMarkers -> combineReminderMarkers -> reminderMarkers
}


subgraph cluster_TRANSACTIONS {
  style="filled,rounded"
  color="#e8e8e8";
  node [color="#c4e5fe"] // Start
  rawTransactions

  node [color="#ab6cfe", fontcolor="white", shape="ellipse"] // Functions
  combineTransactions

  node [color="#ffcccc", fontcolor="black", shape="box"] // Results
  fxIdMap -> combineTransactions [color="#dd0044"]
  debtAccountId -> combineTransactions [color="#dd0044"]
  rawTransactions -> combineTransactions -> transactions
}


subgraph cluster_HIDDEN_DATA {
  style="filled,rounded"
  color="#e8e8e8";

  node [color="#ab6cfe", fontcolor="white", shape="ellipse"] // Functions
  parseHiddenData

  node [color="#ffcccc", fontcolor="black", shape="box"] // Results
  accounts -> dataAccId [color="#dd0044"]
  accounts -> parseHiddenData [color="#dd0044"]
  rawTags -> parseHiddenData [color="#dd0044"]
  reminders -> parseHiddenData [color="#dd0044"]
  dataAccId -> parseHiddenData
  parseHiddenData -> subgraph hidden_data {
    node [style="rounded,dashed", fontcolor="#5925ab", color="#5925ab"]
    linkedAccounts
    linkedDebtors
    tagMeta
    tagTree
    budgets
    goals
    fxRates
  }
}

subgraph cluster_DEBTORS {
  style="filled,rounded"
  color="#e8e8e8";

  node [color="#ab6cfe", fontcolor="white", shape="ellipse"] // Functions
  combineDebtors

  node [color="#ffcccc", fontcolor="black", shape="box"] // Results
  transactions -> combineDebtors [color="#dd0044"]
  merchants -> combineDebtors [color="#dd0044"]
  combineDebtors -> debtors
}

subgraph cluster_POPULATED_TAGS {
  style="filled,rounded"
  color="#e8e8e8";

  node [color="#ab6cfe", fontcolor="white", shape="ellipse"] // Functions
  combineTags

  node [color="#ffcccc", fontcolor="black", shape="box"] // Results
  linkedAccounts -> combineTags [color="#dd0044"]
  linkedDebtors -> combineTags [color="#dd0044"]
  tagMeta -> combineTags [color="#dd0044"]
  tagTree -> combineTags [color="#dd0044"]
  rawTags -> combineTags [color="#dd0044"]
  combineTags -> populatedTags
}


}
